# DigitalOcean App Platform specification for ProcureGuard
# Deploy with: doctl apps create --spec .do/procureguard.yaml
name: procureguard

services:
  - name: procureguard
    github:
      repo: <your-github-repo>
      branch: main
      deploy_on_push: true
    dockerfile_path: procureguard/Dockerfile
    envs:
      - key: LLM_MODE
        value: remote
      - key: EMBED_MODE
        value: remote
      - key: QDRANT_URL
        type: SECRET
      - key: QDRANT_API_KEY
        type: SECRET
      - key: VECTOR_DB_PROVIDER
        value: qdrant
      - key: VECTOR_DB_URL
        type: SECRET
      - key: VECTOR_DB_KEY
        type: SECRET
      - key: ENABLE_BACKEND_ACCESS_CONTROL
        value: "false"
      - key: LLM_API_KEY
        type: SECRET
      - key: LLM_PROVIDER
        value: ollama
      - key: LLM_MODEL
        value: cognee-distillabs-model-gguf-quantized
      - key: LLM_ENDPOINT
        type: SECRET
      - key: LLM_API_URL
        type: SECRET
      - key: LLM_MODEL_NAME
        value: cognee-distillabs-model-gguf-quantized
      - key: EMBEDDING_PROVIDER
        value: ollama
      - key: EMBEDDING_MODEL
        value: nomic-embed-text:latest
      - key: EMBEDDING_ENDPOINT
        type: SECRET
      - key: EMBEDDING_DIMENSIONS
        value: "768"
      - key: EMBED_API_URL
        type: SECRET
      - key: EMBED_MODEL_NAME
        value: nomic-embed-text
    http_port: 8000
    instance_count: 1
    instance_size_slug: apps-s-1vcpu-2gb
    routes:
      - path: /
